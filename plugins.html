<!DOCTYPE html>
<html lang="en-US" dir="ltr" data-lt-installed="true">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Microbot Plugins - Free Open Source Client</title>

    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Microbot plugins repository - Extend your Microbot experience with community plugins">

    <meta property="og:site_name" content="Microbot">
    <meta property="og:locale" content="en_US">
    <meta name="theme-color" content="#2c2c2c">

    <link rel="stylesheet" href="./microbot/app.min.css">
    <link rel="stylesheet" href="./libraries/carousel/carousel.css">

    <link rel="stylesheet"
          href="./microbot/341e4a57816af3ba440d891ca87450ff_framework.css.c1bcd9467a7eeb9006567801face652d.css"
          media="all">

    <link rel="stylesheet"
          href="./microbot/20446cf2d164adcc029377cb04d43d17_flags.css.be60c469fe9d673f833faaa74a81e375.css" media="all">

    <link rel="stylesheet"
          href="./microbot/90eb5adf50a8c640f633d47fd7eb1778_core.css.730a336650d62c3b59570edc9065b630.css" media="all">

    <link rel="stylesheet"
          href="./microbot/5a0da001ccc2200dc5625c3f3934497d_core_responsive.css.1d08c9ed37ed1cae43d3985a3b2316ad.css"
          media="all">

    <style>
        .plugins-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .plugins-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 30px;
            width: 100%;
            justify-content: center;
        }

        .plugins-grid-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: space-around;
            width: 100%;
            max-width: 900px; /* Fits 3 cards of 280px each + 2 gaps of 20px */
        }

        @media (min-width: 1200px) {
            .plugins-grid {
            }
        }

        .plugin-card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            flex: 0 0 280px;
            max-width: 280px;
            box-shadow: 0 4px 12px rgba(255, 0, 0, 0.2);
        }

        .plugin-card:hover {
            transform: translateY(-4px);
            border-color: #555;
            text-decoration: none;
            color: inherit;
            box-shadow: 0 4px 12px rgba(255, 0, 0, 0.4);
        }

        .plugin-image-container {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            background: #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .plugin-icon {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .plugin-card:hover .plugin-icon {
            transform: scale(1.05);
        }

        .plugin-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .plugin-header {
            margin-bottom: 15px;
        }

        .plugin-title {
            color: #fff;
            font-size: 1.3em;
            font-weight: 600;
            margin: 0 0 8px 0;
            line-height: 1.2;
        }

        .plugin-author {
            color: #888;
            font-size: 0.9em;
            margin: 0;
        }

        .plugin-tags {
            margin-bottom: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .plugin-tag {
            background: #333;
            color: #fff;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            white-space: nowrap;
        }

        .plugin-description {
            color: #ccc;
            line-height: 1.5;
            flex-grow: 1;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .plugin-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #333;
        }

        .plugin-version {
            background: #2c5aa0;
            color: white;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .plugin-min-version {
            color: #888;
            font-size: 0.8em;
        }

        .loading {
            text-align: center;
            color: #ccc;
            font-size: 1.2em;
            padding: 40px;
            grid-column: 1 / -1;
        }

        .error {
            text-align: center;
            color: #dc3545;
            font-size: 1.2em;
            padding: 40px;
            grid-column: 1 / -1;
        }

        .plugins-header {
            text-align: center;
            color: #fff;
            margin-bottom: 20px;
        }

        .plugins-count {
            color: #fff;
            font-size: 1.4em;
            margin-top: 15px;
            font-weight: 600;
            background: rgba(217, 44, 38, 0.15);
            display: inline-block;
            padding: 8px 20px;
            border-radius: 10px;
            border: 1px solid rgba(217, 44, 38, 0.3);
        }

        .plugin-card:focus {
            outline: 2px solid #2c5aa0;
            outline-offset: 2px;
        }

        /* Loading spinner */
        .fa-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Search bar styles */
        .search-container {
            margin: 30px 0;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .search-bar {
            display: flex;
            align-items: center;
            width: 100%;
            background: #2a2a2a;
            border-radius: 30px;
            overflow: hidden;
            border: 1px solid #444;
            box-shadow: 0 4px 12px rgba(255, 0, 0, 0.2);
            justify-content: space-between;
        }

        .search-input {
            flex: 1;
            padding: 15px 25px !important;
            border: none !important;
            border-radius: 30px 0 0 30px !important;
            background-color: #2a2a2a !important;
            color: #fff !important;
            font-size: 1.1em !important;
            max-width: 100% !important;
        }

        .search-input::placeholder {
            color: #888;
        }

        .highlight-count {
            animation: highlight 0.5s ease-out;
        }

        @keyframes highlight {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body style="background-color:black !important;" class="ipsApp ipsApp_front ipsClearfix ipsJS_has ipsApp_noTouch"
      data-controller="core.front.core.app" data-message="" data-pageapp="" data-pagelocation="front" data-pagemodule=""
      data-pagecontroller="">
<header class="c-header">
    <!-- Event Start -->
    <div class="c-events-block py-2">
        <div class="container d-flex flex-column flex-md-row align-items-center justify-content-between gap-2">
            <div></div>
            <a href="https://discord.gg/zaGrfqFEWE" target="_blank" rel="noreferrer noopener"
               class="c-events-block__right d-flex flex-row align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" class="me-2" viewBox="0 0 71 55"><title>logo
                    discord</title>
                    <g fill="none" class="nc-icon-wrapper">
                        <g clip-path="url(#clip0)">
                            <path d="M60.105 4.898A58.55 58.55 0 0 0 45.653.415a.22.22 0 0 0-.233.11 40.784 40.784 0 0 0-1.8 3.697c-5.456-.817-10.886-.817-16.23 0-.485-1.164-1.201-2.587-1.828-3.697a.228.228 0 0 0-.233-.11 58.386 58.386 0 0 0-14.451 4.483.207.207 0 0 0-.095.082C1.578 18.73-.944 32.144.293 45.39a.244.244 0 0 0 .093.167c6.073 4.46 11.955 7.167 17.729 8.962a.23.23 0 0 0 .249-.082 42.08 42.08 0 0 0 3.627-5.9.225.225 0 0 0-.123-.312 38.772 38.772 0 0 1-5.539-2.64.228.228 0 0 1-.022-.378c.372-.279.744-.569 1.1-.862a.22.22 0 0 1 .23-.03c11.619 5.304 24.198 5.304 35.68 0a.219.219 0 0 1 .233.027c.356.293.728.586 1.103.865a.228.228 0 0 1-.02.378 36.384 36.384 0 0 1-5.54 2.637.227.227 0 0 0-.121.315 47.249 47.249 0 0 0 3.624 5.897.225.225 0 0 0 .249.084c5.801-1.794 11.684-4.502 17.757-8.961a.228.228 0 0 0 .092-.164c1.48-15.315-2.48-28.618-10.497-40.412a.18.18 0 0 0-.093-.084zm-36.38 32.427c-3.497 0-6.38-3.211-6.38-7.156 0-3.944 2.827-7.156 6.38-7.156 3.583 0 6.438 3.24 6.382 7.156 0 3.945-2.827 7.156-6.381 7.156zm23.593 0c-3.498 0-6.38-3.211-6.38-7.156 0-3.944 2.826-7.156 6.38-7.156 3.582 0 6.437 3.24 6.38 7.156 0 3.945-2.798 7.156-6.38 7.156z"
                                  fill="currentColor"></path>
                        </g>
                        <defs>
                            <clippath id="clip0">
                                <path fill="currentColor" d="M0 0h71v55H0z"></path>
                            </clippath>
                        </defs>
                    </g>
                </svg>
                <p class="mb-0">Join us on Discord</p>
            </a>
        </div>
    </div>
    <div class="c-border-red mb-2"></div>
    <!-- Event End -->      <!-- Navigation Start -->
    <nav class="c-nav navbar navbar-expand-sm py-2" style="flex-wrap:nowrap;justify-content: flex-start">
        <div class="container align-items-stretch">
            <a class="navbar-brand me-0 me-lg-3 me-xl-5" href="index.html">
                <img src="./microbot/logo.png" class="c-nav__logo" loading="lazy" alt="logo">
            </a>
            <div class="p-3 p-xl-0" style="line-height: 2rem;width: 100%;" id="navbarMenu">
                <ul class="navbar-nav me-auto text-center text-xl-left gap-3 gap-xl-4">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.github.com/chsami/microbot" target="_blank">Github</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://discord.gg/zaGrfqFEWE" target="_blank">Discord</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://chatgpt.com/g/g-LM0fGeeXB-microbot-documentation"
                           target="_blank">ChatGPT</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://paypal.me/MicrobotBE?country.x=BE" target="_blank">Donate</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="releases.html">Releases</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="plugins.html">Plugins</a>
                    </li>
                </ul>
            </div>

            <ul id="elMobileNav"
                class="ipsList_inline ipsResponsive_hideDesktop ipsResponsive_block my-auto d-flex gx-2"
                data-controller="core.front.core.mobileNav" data-default="all">

                <li class="navbar-toggler my-auto py-3 position-relative" data-ipsdrawer=""
                    data-ipsdrawer-drawerelem="#elMobileDrawer">
                    <a href="#">
                        <i class="fa fa-navicon"></i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Navigation End -->
</header>

<main>
    <div class="plugins-container" style="margin-top: 100px;">
        <div class="plugins-header">
            <h1 class="display-2 text-uppercase">Microbot Plugins</h1>
            <p>Extend your Microbot experience with community-developed plugins</p>

            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="pluginSearch" class="search-input" placeholder="Search plugins by name, author, or tags...">
                </div>
            </div>

            <div class="plugins-count" id="pluginsCount">Loading plugins...</div>
        </div>

        <div id="pluginsContainer" class="plugins-grid">
            <div class="loading">
                <i class="fa fa-spinner fa-spin"></i> Loading plugins...
            </div>
        </div>
    </div>
</main>

<script>
document.addEventListener("DOMContentLoaded", function() {
    document.getElementById('pluginSearch')?.focus();
    fetchPlugins();
});

let allPlugins = []; // Store all plugins for searching

async function fetchPlugins() {
    const pluginsContainer = document.getElementById('pluginsContainer');
    const pluginsCount = document.getElementById('pluginsCount');

    try {
        const response = await fetch('https://chsami.github.io/Microbot-Hub/plugins.json');

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        // Get all plugins and filter out disabled ones
        const plugins = await response.json();
        allPlugins = plugins.filter(plugin => !plugin.disable);

        // Create count-up animation for plugins count
        animatePluginCount(allPlugins.length);

        // Display all plugins initially
        displayPlugins(allPlugins);

        // Set up search functionality
        setupSearch();

    } catch (error) {
        console.error('Error fetching plugins:', error);
        pluginsContainer.innerHTML = `
            <div class="error">
                <i class="fa fa-exclamation-triangle"></i>
                Failed to load plugins. Please try again later.
            </div>
        `;
        pluginsCount.textContent = 'Error loading plugins';
    }
}

function animatePluginCount(total) {
    const pluginsCount = document.getElementById('pluginsCount');
    let current = 0;
    const duration = 1500; // Animation duration in milliseconds
    const step = Math.ceil(total / (duration / 50)); // Update every 50ms

    // Clear any existing text first
    pluginsCount.innerHTML = '<span class="count-number">0</span> plugins available';

    const countSpan = pluginsCount.querySelector('.count-number');

    const interval = setInterval(() => {
        current += step;
        if (current >= total) {
            clearInterval(interval);
            current = total;

            // Add a highlight animation once counting is complete
            setTimeout(() => {
                countSpan.classList.add('highlight-count');
            }, 1000);
        }
        countSpan.textContent = current;
    }, 50);
}

function displayPlugins(plugins) {
    const pluginsContainer = document.getElementById('pluginsContainer');
    const pluginsCount = document.getElementById('pluginsCount');

    // Update count for search results
    if (plugins.length !== allPlugins.length) {
        pluginsCount.innerHTML = `<span class="count-number">${plugins.length}</span> of ${allPlugins.length} plugins found`;
    }

    // No animation needed for the initial display or when returning to all plugins
    // as it was already animated when the page loaded

    // Clear container
    pluginsContainer.innerHTML = '';

    if (plugins.length === 0) {
        pluginsContainer.innerHTML = `
            <div class="error">
                <i class="fa fa-search"></i>
                No plugins match your search criteria.
            </div>
        `;
        return;
    }

    // Create a row container for every set of 3 cards
    for (let i = 0; i < plugins.length; i += 3) {
        const rowContainer = document.createElement('div');
        rowContainer.className = 'plugins-grid-row';

        // Add up to 3 cards per row
        for (let j = i; j < i + 3 && j < plugins.length; j++) {
            const pluginCard = createPluginCard(plugins[j]);
            rowContainer.appendChild(pluginCard);
        }

        pluginsContainer.appendChild(rowContainer);
    }
}

function setupSearch() {
    const searchInput = document.getElementById('pluginSearch');

    // Search when Enter key is pressed
    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            performSearch();
        }
    });

    // Real-time search as user types (optional, can be removed if preferred)
    searchInput.addEventListener('input', performSearch);
}

function performSearch() {
    const searchTerm = document.getElementById('pluginSearch').value.toLowerCase().trim();

    if (searchTerm === '') {
        // If search is empty, show all plugins
        displayPlugins(allPlugins);
        return;
    }

    // Filter plugins based on search term
    const filtered = allPlugins.filter(plugin => {
        // Search in name
        if (plugin.name.toLowerCase().includes(searchTerm)) return true;

        // Search in authors
        if (plugin.authors && plugin.authors.some(author => author.toLowerCase().includes(searchTerm))) return true;

        // Search in description
        if (plugin.description.toLowerCase().includes(searchTerm)) return true;

        // Search in tags
        if (plugin.tags && plugin.tags.some(tag => tag.toLowerCase().includes(searchTerm))) return true;

        return false;
    });

    // Display filtered results
    displayPlugins(filtered);
}

function createPluginCard(plugin) {
    const card = document.createElement('a');
    card.className = 'plugin-card';
    card.href = `https://chsami.github.io/Microbot-Hub/${plugin.internalName}`;
    card.target = '_blank';
    card.rel = 'noopener noreferrer';

    // Create tags HTML
    const tagsHtml = plugin.tags.map(tag => `<span class="plugin-tag">${tag}</span>`).join('');

    // Create authors string from array
    const authorsText = plugin.authors ? plugin.authors.join(', ') : '';

    card.innerHTML = `
        <div class="plugin-image-container">
            <img src="${plugin.cardUrl}" alt="${plugin.name} icon" class="plugin-icon" onerror="this.src='images/favicon.ico'">
        </div>

        <div class="plugin-content">
            <div class="plugin-header">
                <h3 class="plugin-title">${plugin.name}</h3>
                <div class="plugin-author">by ${authorsText}</div>
            </div>

            <div class="plugin-tags">
                ${tagsHtml}
            </div>

            <p class="plugin-description">${plugin.description}</p>

            <div class="plugin-meta">
                <div>
                    <span class="plugin-version">v${plugin.version}</span>
                </div>
                <div class="plugin-min-version">Min Client: ${plugin.minClientVersion}</div>
            </div>
        </div>
    `;

    return card;
}
</script>

</body>
</html>
